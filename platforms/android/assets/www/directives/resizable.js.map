{"version":3,"sources":["app/directives/resizable.ts"],"names":["Resizable","Resizable.constructor","Resizable.edit","Resizable.ngOnInit"],"mappings":";;;;;;;;;AAAA,qBAA+D,eAAe,CAAC,CAAA;AAC/E,8BAA4B,2BAA2B,CAAC,CAAA;AACxD,qCAAkD,kCAAkC,CAAC,CAAA;AAKrF;IAUEA,mBAAoBA,UAAsBA,EAAUA,aAA4BA,EAAUA,oBAA0CA;QAAhHC,eAAUA,GAAVA,UAAUA,CAAYA;QAAUA,kBAAaA,GAAbA,aAAaA,CAAeA;QAAUA,yBAAoBA,GAApBA,oBAAoBA,CAAsBA;IACpIA,CAACA;IAEDD,wBAAIA,GAAJA,UAAKA,SAASA,EAAEA,IAAIA;QAClBE,IAAIA,CAACA,oBAAoBA,CAACA,WAAWA,CAACA,SAASA,EAAEA,IAAIA,CAACA,CAACA;IACzDA,CAACA;IAEDF,4BAAQA,GAARA;QAAAG,iBA8CCA;QA7CCA,IAAIA,UAAUA,GAAGA,IAAIA,CAACA,aAAaA,CAACA,eAAeA,CAACA;QACpDA,IAAIA,aAAaA,GAAGA,IAAIA,CAACA,UAAUA,CAACA,aAAaA,CAACA;QAClDA,IAAIA,SAASA,GAAGA,EAAEA,CAACA;QACnBA,IAAIA,SAASA,GAAGA,GAAGA,CAACA;QACpBA,IAAIA,QAAQA,GAAGA,EAAEA,CAACA;QAClBA,IAAIA,QAAQA,GAAGA,GAAGA,CAACA;QACnBA,IAAIA,OAAOA,GAAGA,YAAYA,CAACA;QAC3BA,IAAIA,UAAUA,CAACA;QACfA,EAAEA,CAACA,CAACA,IAAIA,CAACA,IAAIA,IAAIA,IAAIA,CAACA,IAAIA,CAACA,WAAWA,KAAKA,MAAMA,CAACA,CAACA,CAACA;YAClDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,eAAeA,CAACA,CAACA,CAACA;gBAC9BA,QAAQA,GAAGA,CAACA,CAACA;gBACbA,QAAQA,GAAGA,CAACA,CAACA;gBACbA,OAAOA,GAAGA,MAAMA,CAACA;YACnBA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACNA,SAASA,GAAGA,CAACA,CAACA;gBACdA,SAASA,GAAGA,CAACA,CAACA;gBACdA,OAAOA,GAAGA,MAAMA,CAACA;YACnBA,CAACA;QACHA,CAACA;QACDA,EAAEA,CAACA,CAACA,UAAUA,CAACA,CAACA,CAACA;YACfA,MAAMA,CAACA,aAAaA,CAACA;iBAClBA,SAASA,CAACA;gBACTA,SAASA,EAAEA,SAASA;gBACpBA,QAAQA,EAAEA,QAAQA;gBAClBA,QAAQA,EAAEA,QAAQA;gBAClBA,SAASA,EAAEA,SAASA;gBACpBA,OAAOA,EAAEA,OAAOA;gBAChBA,IAAIA,EAAEA,UAACA,CAACA,EAAEA,OAAOA;oBACfA,IAAIA,SAASA,GAAGA,OAAOA,CAACA,OAAOA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAACA;oBACnDA,IAAIA,SAASA,GAAGA,KAAIA,CAACA,aAAaA,CAACA,YAAYA,CAACA,CAACA,EAAEA,OAAOA,CAACA,CAACA;oBAC5DA,IAAIA,OAAOA,GAAGA,MAAMA,CAACA,CAACA,CAACA,MAAMA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;oBAC1CA,EAAEA,CAACA,CAACA,SAASA,CAACA,CAACA,CAACA;wBACdA,KAAIA,CAACA,IAAIA,CAACA,SAASA,EAAEA;4BACnBA,OAAOA,EAAEA,OAAOA;4BAChBA,YAAYA,EAAEA,SAASA,CAACA,KAAKA;4BAC7BA,aAAaA,EAAEA,SAASA,CAACA,MAAMA;yBAChCA,CAACA,CAACA;oBACLA,CAACA;gBACHA,CAACA;aACFA,CAACA,CAACA;QACPA,CAACA;QAACA,IAAIA,CAACA,CAACA;YACNA,EAAEA,CAACA,CAACA,MAAMA,CAACA,aAAaA,CAACA,CAACA,QAAQA,CAACA,cAAcA,CAACA,CAACA,CAACA,CAACA;gBACnDA,MAAMA,CAACA,aAAaA,CAACA,CAACA,SAASA,CAACA,SAASA,CAACA,CAACA;YAC7CA,CAACA;QACHA,CAACA;IACHA,CAACA;IAvDDH;QAACA,YAAKA,EAAEA;;OAACA,2BAAIA,UAACA;IARhBA;QAACA,gBAASA,CAACA;YACTA,QAAQA,EAAEA,qBAAqBA;YAC/BA,MAAMA,EAAEA,CAACA,MAAMA,CAACA;SACjBA,CAACA;QAEDA,iBAAUA,EAAEA;;kBA2DZA;IAADA,gBAACA;;AAADA,CAhEA,AAgECA,IAAA;AA1DY,iBAAS,YA0DrB,CAAA;AAAA,CAAC","file":"app/directives/resizable.js","sourcesContent":["import {Directive, OnInit, ElementRef, Input, Injectable} from 'angular2/core';\nimport {DesignService} from '../services/DesignService';\nimport {IFloorElement, FloorElementsService} from '../services/FloorElementsService';\nimport {Observable} from 'rxjs';\n\ndeclare var jQuery: any;\n\n@Directive({\n  selector: '[resizable-element]',\n  inputs: ['data']\n})\n\n@Injectable()\nexport class Resizable implements OnInit {\n  observable;\n  @Input() data;\n\n  constructor(private elementRef: ElementRef, private DesignService: DesignService, private FloorElementsService: FloorElementsService) {\n  }\n\n  edit(elementID, data) {\n    this.FloorElementsService.editElement(elementID, data);\n  }\n\n  ngOnInit() {\n    let designMode = this.DesignService.designModeState;\n    let nativeElement = this.elementRef.nativeElement;\n    let minHeight = 55;\n    let maxHeight = 300;\n    let minWidth = 50;\n    let maxWidth = 400;\n    let handles = 'n, e, s, w';\n    let intervalID;\n    if (this.data && this.data.elementType === 'line') {\n      if (this.data.elementVertical) {\n        minWidth = 3;\n        maxWidth = 3;\n        handles = 's, n';\n      } else {\n        minHeight = 3;\n        maxHeight = 3;\n        handles = 'e, w';\n      }\n    }\n    if (designMode) {\n      jQuery(nativeElement)\n        .resizable({\n          minHeight: minHeight,\n          minWidth: minWidth,\n          maxWidth: maxWidth,\n          maxHeight: maxHeight,\n          handles: handles,\n          stop: (e, dropped) => {\n            let elementID = dropped.element.attr('element-id');\n            let dimension = this.DesignService.getDimension(e, dropped);\n            let floorID = jQuery(e.target).data('id');\n            if (elementID) {\n              this.edit(elementID, {\n                floorID: floorID,\n                elementWidth: dimension.width,\n                elementHeight: dimension.height\n              });\n            }\n          }\n        });\n    } else {\n      if (jQuery(nativeElement).hasClass('ui-resizable')) {\n        jQuery(nativeElement).resizable('destroy');\n      }\n    }\n  }\n};\n"],"sourceRoot":"/source/"}
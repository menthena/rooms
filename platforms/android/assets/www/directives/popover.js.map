{"version":3,"sources":["app/directives/popover.ts"],"names":["Popover","Popover.constructor","Popover.handleCancelReservation","Popover.handleEditReservation","Popover.ngOnInit"],"mappings":";;;;;;;;;;;;;;;;;;;;;YAMA;gBA8CEA,iBAAoBA,UAAsBA,EAAUA,kBAAsCA;oBAAtEC,eAAUA,GAAVA,UAAUA,CAAYA;oBAAUA,uBAAkBA,GAAlBA,kBAAkBA,CAAoBA;oBAHhFA,oBAAeA,GAAQA,IAAIA,mBAAYA,EAAEA,CAACA;gBAGyCA,CAACA;gBAE9FD,yCAAuBA,GAAvBA,UAAwBA,SAASA;oBAAjCE,iBAMCA;oBALCA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA;oBACzBA,IAAIA,CAACA,kBAAkBA,CAACA,iBAAiBA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,aAAaA,EAAEA,SAASA,CAACA;yBACvFA,GAAGA,CAACA;wBACHA,KAAIA,CAACA,YAAYA,GAAGA,KAAKA,CAACA;oBAC5BA,CAACA,CAACA,CAACA;gBACPA,CAACA;gBAEDF,uCAAqBA,GAArBA;oBACEG,IAAIA,CAACA,eAAeA;yBACjBA,IAAIA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,aAAaA,CAACA,CAACA;gBAChDA,CAACA;gBAEDH,0BAAQA,GAARA;gBAkBAI,CAACA;gBAvCDJ;oBAACA,YAAKA,EAAEA;;mBAACA,yBAAIA,UAAgBA;gBAC7BA;oBAACA,YAAKA,EAAEA;;mBAACA,iCAAYA,UAAsBA;gBAC3CA;oBAACA,YAAKA,EAAEA;;mBAACA,sCAAiBA,UAAeA;gBACzCA;oBAACA,aAAMA,EAAEA;;mBAACA,oCAAeA,UAA2BA;gBA3CtDA;oBAACA,gBAASA,CAACA;wBACTA,QAAQA,EAAEA,SAASA;wBACnBA,MAAMA,EAAEA,CAACA,MAAMA,EAAEA,cAAcA,EAAEA,mBAAmBA,CAACA;wBACrDA,aAAaA,EAAEA,wBAAiBA,CAACA,IAAIA;wBACrCA,SAASA,EAAEA,CAACA,2BAA2BA,CAACA;wBACxCA,QAAQA,EAAEA,kuCA8BTA;qBACFA,CAACA;oBAEDA,iBAAUA,EAAEA;;4BA0CZA;gBAADA,cAACA;YAADA,CAhFA,AAgFCA,IAAA;YAhFD,6BAgFC,CAAA;YAAA,CAAC","file":"app/directives/popover.js","sourcesContent":["import {Component, OnInit, ElementRef, Input, Output, Injectable, ViewEncapsulation, EventEmitter} from 'angular2/core';\nimport {IFloorElement} from '../services/FloorElementsService';\nimport {IReservation, ReservationService} from '../services/ReservationService';\n\ndeclare var jQuery: any;\n\n@Component({\n  selector: 'popover',\n  inputs: ['data', 'reservations', 'activeReservation'],\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['styles/common/popover.css'],\n  template: `\n    <ng-content></ng-content>\n    <div class=\"reservation-popover\" [class.cancelling]=\"isCancelling\">\n      <div class=\"content\">\n        <i class=\"fa fa-check-square-o\"></i> Reserved by you.\n        <div class=\"controllers\">\n          <div><a (click)=\"handleEditReservation()\"><i class=\"fa fa-pencil\"></i> Edit</a></div>\n          <div><a (click)=\"handleCancelReservation()\"><i class=\"fa fa-trash\"></i> Cancel</a></div>\n          <div *ngIf=\"activeReservation && activeReservation.recurring\">\n            <a (click)=\"handleCancelReservation(true)\"><i class=\"fa fa-bars\"></i> Cancel all recurring</a>\n          </div>\n        </div>\n      </div>\n      <!--div class=\"next-available\">\n        <div class=\"content\">\n          <span class=\"title\">Next available</span>\n          <div>\n            <div class=\"time column\">\n              <span>12</span>\n              <span class=\"colon\">:</span>\n              <span>30</span>\n              <span class=\"am-pm\">AM</span>\n            </div>\n            <div class=\"column\">\n              <a class=\"reserve-link\"><i class=\"fa fa-plus\"></i> Reserve</a>\n            </div>\n          </div>\n        </div>\n      </div-->\n    </div>\n  `\n})\n\n@Injectable()\nexport class Popover implements OnInit {\n  @Input() data: IFloorElement;\n  @Input() reservations: Array<IReservation>;\n  @Input() activeReservation: IReservation;\n  @Output() editReservation: any = new EventEmitter();\n  isCancelling: boolean;\n\n  constructor(private elementRef: ElementRef, private ReservationService: ReservationService) {}\n\n  handleCancelReservation(recurring) {\n    this.isCancelling = true;\n    this.ReservationService.cancelReservation(this.activeReservation.reservationID, recurring)\n      .add(() => {\n        this.isCancelling = false;\n      });\n  }\n\n  handleEditReservation() {\n    this.editReservation\n      .emit(this.activeReservation.reservationID);\n  }\n\n  ngOnInit() {\n    // let nativeElement = this.elementRef.nativeElement;\n    // console.log(jQuery(nativeElement).parent());\n    // jQuery(nativeElement).popover({\n    //   html: true,\n    //   placement: 'bottom',\n    //   delay: 50,\n    //   trigger: 'hover',\n    //   content: `\n    //\n    //   `\n    // });\n\n    // jQuery('.reservation-popover')\n    //   .find('a')\n    //   .on('click', () => {\n    //     console.log('a');\n    //   });\n  }\n};\n"],"sourceRoot":"/source/"}
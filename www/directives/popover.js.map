{"version":3,"sources":["app/directives/popover.ts"],"names":["Popover","Popover.constructor","Popover.handleCancelReservation","Popover.handleEditReservation","Popover.ngOnInit"],"mappings":";;;;;;;;;AAAA,qBAAwG,eAAe,CAAC,CAAA;AACxH,qCAA4B,kCAAkC,CAAC,CAAA;AAC/D,mCAA+C,gCAAgC,CAAC,CAAA;AAIhF;IAgDEA,iBAAoBA,UAAsBA,EAAUA,kBAAsCA;QAAtEC,eAAUA,GAAVA,UAAUA,CAAYA;QAAUA,uBAAkBA,GAAlBA,kBAAkBA,CAAoBA;QAHhFA,oBAAeA,GAAQA,IAAIA,mBAAYA,EAAEA,CAACA;IAGyCA,CAACA;IAE9FD,yCAAuBA,GAAvBA,UAAwBA,SAASA;QAAjCE,iBAMCA;QALCA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA;QACzBA,IAAIA,CAACA,kBAAkBA,CAACA,iBAAiBA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,aAAaA,EAAEA,SAASA,CAACA;aACvFA,GAAGA,CAACA;YACHA,KAAIA,CAACA,YAAYA,GAAGA,KAAKA,CAACA;QAC5BA,CAACA,CAACA,CAACA;IACPA,CAACA;IAEDF,uCAAqBA,GAArBA;QACEG,IAAIA,CAACA,eAAeA;aACjBA,IAAIA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,aAAaA,CAACA,CAACA;IAChDA,CAACA;IAEDH,0BAAQA,GAARA;QACEI,qDAAqDA;QACrDA,+CAA+CA;QAC/CA,kCAAkCA;QAClCA,gBAAgBA;QAChBA,yBAAyBA;QACzBA,eAAeA;QACfA,sBAAsBA;QACtBA,eAAeA;QACfA,EAAEA;QACFA,MAAMA;QACNA,MAAMA;QAENA,iCAAiCA;QACjCA,eAAeA;QACfA,yBAAyBA;QACzBA,wBAAwBA;QACxBA,QAAQA;IACVA,CAACA;IAvCDJ;QAACA,YAAKA,EAAEA;;OAACA,yBAAIA,UAAgBA;IAC7BA;QAACA,YAAKA,EAAEA;;OAACA,iCAAYA,UAAsBA;IAC3CA;QAACA,YAAKA,EAAEA;;OAACA,sCAAiBA,UAAeA;IACzCA;QAACA,aAAMA,EAAEA;;OAACA,oCAAeA,UAA2BA;IA7CtDA;QAACA,gBAASA,CAACA;YACTA,QAAQA,EAAEA,SAASA;YACnBA,MAAMA,EAAEA,CAACA,MAAMA,EAAEA,cAAcA,EAAEA,mBAAmBA,CAACA;YACrDA,QAAQA;YACRA,gCAAgCA;YAChCA,aAAaA,EAAEA,wBAAiBA,CAACA,IAAIA;YACrCA,SAASA,EAAEA,CAACA,2BAA2BA,CAACA;YACxCA,QAAQA,EAAEA,kuCA8BTA;SACFA,CAACA;QAEDA,iBAAUA,EAAEA;;gBA0CZA;IAADA,cAACA;;AAADA,CAlFA,AAkFCA,IAAA;AAzCY,eAAO,UAyCnB,CAAA;AAAA,CAAC","file":"app/directives/popover.js","sourcesContent":["import {Component, OnInit, ElementRef, Input, Output, Injectable, ViewEncapsulation, EventEmitter} from 'angular2/core';\nimport {IFloorElement} from '../services/FloorElementsService';\nimport {IReservation, ReservationService} from '../services/ReservationService';\n\ndeclare var jQuery: any;\n\n@Component({\n  selector: 'popover',\n  inputs: ['data', 'reservations', 'activeReservation'],\n  // TODO:\n  // outputs: ['editReservation'],\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['styles/common/popover.css'],\n  template: `\n    <ng-content></ng-content>\n    <div class=\"reservation-popover\" [class.cancelling]=\"isCancelling\">\n      <div class=\"content\">\n        <i class=\"fa fa-check-square-o\"></i> Reserved by you.\n        <div class=\"controllers\">\n          <div><a (click)=\"handleEditReservation()\"><i class=\"fa fa-pencil\"></i> Edit</a></div>\n          <div><a (click)=\"handleCancelReservation()\"><i class=\"fa fa-trash\"></i> Cancel</a></div>\n          <div *ngIf=\"activeReservation && activeReservation.recurring\">\n            <a (click)=\"handleCancelReservation(true)\"><i class=\"fa fa-bars\"></i> Cancel all recurring</a>\n          </div>\n        </div>\n      </div>\n      <!--div class=\"next-available\">\n        <div class=\"content\">\n          <span class=\"title\">Next available</span>\n          <div>\n            <div class=\"time column\">\n              <span>12</span>\n              <span class=\"colon\">:</span>\n              <span>30</span>\n              <span class=\"am-pm\">AM</span>\n            </div>\n            <div class=\"column\">\n              <a class=\"reserve-link\"><i class=\"fa fa-plus\"></i> Reserve</a>\n            </div>\n          </div>\n        </div>\n      </div-->\n    </div>\n  `\n})\n\n@Injectable()\nexport class Popover implements OnInit {\n  @Input() data: IFloorElement;\n  @Input() reservations: Array<IReservation>;\n  @Input() activeReservation: IReservation;\n  @Output() editReservation: any = new EventEmitter();\n  isCancelling: boolean;\n\n  constructor(private elementRef: ElementRef, private ReservationService: ReservationService) {}\n\n  handleCancelReservation(recurring) {\n    this.isCancelling = true;\n    this.ReservationService.cancelReservation(this.activeReservation.reservationID, recurring)\n      .add(() => {\n        this.isCancelling = false;\n      });\n  }\n\n  handleEditReservation() {\n    this.editReservation\n      .emit(this.activeReservation.reservationID);\n  }\n\n  ngOnInit() {\n    // let nativeElement = this.elementRef.nativeElement;\n    // console.log(jQuery(nativeElement).parent());\n    // jQuery(nativeElement).popover({\n    //   html: true,\n    //   placement: 'bottom',\n    //   delay: 50,\n    //   trigger: 'hover',\n    //   content: `\n    //\n    //   `\n    // });\n\n    // jQuery('.reservation-popover')\n    //   .find('a')\n    //   .on('click', () => {\n    //     console.log('a');\n    //   });\n  }\n};\n"],"sourceRoot":"/source/"}
{"version":3,"sources":["app/components/design/edit-element.ts"],"names":["EditElement","EditElement.constructor","EditElement.dismissEditing","EditElement.setIcon","EditElement.submitEditForm","EditElement.ngOnInit"],"mappings":"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","file":"app/components/design/edit-element.js","sourcesContent":["import {Component, Input, OnInit, ElementRef,\n  ViewEncapsulation} from 'angular2/core';\nimport {Observable} from 'rxjs';\nimport {Validators, FormBuilder} from 'angular2/common';\nimport {IFloorElement} from '../../services/FloorElementsService';\nimport {DesignService} from '../../services/DesignService';\nimport {FloorElementsService} from '../../services/FloorElementsService';\nimport {Slider} from '../form/slider';\nimport {FeatureList} from '../form/feature-list';\n\ndeclare var jQuery: any;\n\n@Component({\n  selector: 'edit-element',\n  directives: [Slider, FeatureList],\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['styles/edit-element.css'],\n  inputs: ['data'],\n  template: `\n    <div class=\"wrapper\">\n      <div class=\"edit-element\" *ngIf=\"editID === data.elementID\"\n      [ngClass]=\"{'active': isActive, 'submitting': isSubmitting, 'element-placeholder': data.elementType === 'placeholder'}\">\n        <form [ngFormModel]=\"editForm\" (ngSubmit)=\"submitEditForm($event)\">\n          <div class=\"heading\">\n            Edit\n          </div>\n\n          <div class=\"form\">\n            <div class=\"input-group\">\n              <label for=\"elementName\">Name</label>\n              <input type=\"text\" name=\"elementName\" ngControl=\"elementName\" id=\"elementName\" placeholder=\"Element name...\" />\n            </div>\n\n            <div *ngIf=\"data.elementType === 'placeholder'\">\n              <div class=\"input-group\">\n                <label>Icon</label>\n                <div class=\"icons\">\n                  <ul class=\"list-unstyled list-inline\">\n                    <li>\n                      <a (click)=\"setIcon(null)\" [class.selected]=\"!data.elementIcon\">None</a>\n                    </li>\n                    <li>\n                      <a (click)=\"setIcon('printer')\" [class.selected]=\"data.elementIcon === 'printer'\">\n                        <i class=\"fa fa-print\"></i> Printer\n                      </a>\n                    </li>\n                    <li>\n                      <a (click)=\"setIcon('information')\" [class.selected]=\"data.elementIcon === 'information'\">\n                        <i class=\"fa fa-info\"></i> Information\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div *ngIf=\"data.elementType === 'room'\">\n              <div class=\"input-group\">\n                <label>Min. capacity: <span class=\"slider-content\">({{ editForm.value.capacity }})</span></label>\n                <slider controlName=\"capacity\" [formModel]=\"editForm\"></slider>\n              </div>\n              <div class=\"input-group\">\n                <label>Features</label>\n                <feature-list controlName=\"features\" [formModel]=\"editForm\"></feature-list>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"buttons\">\n            <a (click)=\"dismissEditing()\"><i class=\"fa fa-times\"></i></a>\n            <a (click)=\"submitEditForm()\" class=\"submit\"><i class=\"fa fa-check\"></i></a>\n          </div>\n        </form>\n      </div>\n    </div>\n  `\n})\n\nexport class EditElement {\n  @Input() data: IFloorElement;\n  designObservable;\n  isSubmitting: boolean;\n  isActive: boolean;\n  editID: boolean;\n  editForm: any;\n  floorElementsObservable;\n\n  constructor(private elementRef: ElementRef, DesignService: DesignService,\n      private fb: FormBuilder, private FloorElementsService: FloorElementsService) {\n    this.designObservable = DesignService.getObservable();\n    this.FloorElementsService = FloorElementsService;\n    this.floorElementsObservable = this.FloorElementsService.getObservable();\n  }\n\n  dismissEditing() {\n    this.isActive = false;\n    setTimeout(() => {\n      this.editID = null;\n    }, 200);\n  }\n\n  setIcon(icon: string) {\n    this.data.elementIcon = icon;\n  }\n\n  submitEditForm() {\n    if (!this.isSubmitting) {\n      this.isSubmitting = true;\n      let data: any = this.editForm.value;\n      data.floorID = this.data.floorID;\n      this.isActive = false;\n      this.FloorElementsService.editElement(this.data.elementID, data);\n      this.floorElementsObservable\n        .delay(100)\n        .subscribe(() => {\n          this.editID = null;\n        }, (err) => {\n          console.log(err);\n        });\n    }\n  }\n\n  ngOnInit() {\n    this.editForm = this.fb.group({\n      elementName: [this.data.elementName],\n      capacity: [this.data.capacity],\n      features: [this.data.features]\n    });\n    this.designObservable\n      .delay(50)\n      .subscribe((res) => {\n        if (res && res.type === 'edit') {\n          this.isActive = true;\n        }\n      });\n    this.designObservable\n      .subscribe(\n        res => {\n          if (res && res.type === 'edit') {\n            this.isActive = false;\n            this.editID = res.data;\n          }\n        }\n      );\n  }\n}\n"],"sourceRoot":"/source/"}